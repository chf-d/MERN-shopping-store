(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{29:function(t,e,c){},63:function(t,e,c){"use strict";c.r(e);var n=c(1),i=c.n(n),a=c(30),s=c.n(a),r=c(16),o=c(7),d=c(8),u=c(10),j=c(9),l=c(14),p=c(2),h=c(12),b=c.n(h),O=(c(29),c(0)),f=function(t){Object(u.a)(c,t);var e=Object(j.a)(c);function c(){return Object(o.a)(this,c),e.apply(this,arguments)}return Object(d.a)(c,[{key:"render",value:function(){return Object(O.jsxs)("div",{className:"grid",children:[Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)(l.b,{to:"/admin",children:Object(O.jsx)("button",{className:"mainButton",children:"Admin"})}),Object(O.jsx)(l.b,{to:"/home",children:Object(O.jsx)("button",{className:"mainButton",children:"Home"})}),Object(O.jsx)(l.b,{to:"/stats",children:Object(O.jsx)("button",{className:"mainButton",children:"Stats"})}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{})]})}}]),c}(n.Component),x=function(t){Object(u.a)(c,t);var e=Object(j.a)(c);function c(t){var n;return Object(o.a)(this,c),(n=e.call(this,t)).show=function(t,e){return n.state.edit&&e==n.state.editId?Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:Object(O.jsx)("input",{value:n.state.title,onChange:function(t){n.setState({title:t.target.value})}})}),Object(O.jsx)("td",{children:Object(O.jsx)("input",{value:n.state.price,onChange:function(t){n.setState({price:t.target.value})}})}),Object(O.jsx)("td",{children:Object(O.jsx)("input",{value:n.state.description,onChange:function(t){n.setState({description:t.target.value})}})}),Object(O.jsx)("td",{children:Object(O.jsx)("input",{value:n.state.image,onChange:function(t){n.setState({image:t.target.value})}})}),Object(O.jsx)("td",{children:Object(O.jsx)("button",{onClick:function(){n.updateValues(e)},children:"update"})})]}):Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:t.title}),Object(O.jsx)("td",{children:t.price}),Object(O.jsx)("td",{children:t.description}),Object(O.jsx)("td",{children:Object(O.jsx)("img",{className:"imgSize2",src:t.image})}),Object(O.jsxs)("td",{children:[Object(O.jsx)("button",{onClick:function(){n.saveValueforEditing(t,e)},children:"edit"}),Object(O.jsx)("button",{onClick:function(){n.props.removeProduct(t,e)},children:"delete"})]})]})},n.saveValueforEditing=function(t,e){n.setState({edit:!0,editId:e,_id:t._id,title:t.title,price:t.price,description:t.description,image:t.image})},n.updateValues=function(t){var e={_id:n.state._id,title:n.state.title,price:parseInt(n.state.price),description:n.state.description,image:n.state.image};n.props.updateProducts(e,t)},n.addproduct=function(){var t={title:n.state.title,price:n.state.price,description:n.state.description,image:n.state.image};n.props.addproduct(t)},n.displayAddSection=function(){if(n.state.add)return Object(O.jsxs)("div",{children:[Object(O.jsx)("table",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:Object(O.jsx)("input",{placeholder:"title",onChange:function(t){n.setState({title:t.target.value})}})}),Object(O.jsx)("td",{children:Object(O.jsx)("input",{placeholder:"price",onChange:function(t){n.setState({price:t.target.value})}})}),Object(O.jsx)("td",{children:Object(O.jsx)("input",{placeholder:"description",onChange:function(t){n.setState({description:t.target.value})}})}),Object(O.jsx)("td",{children:Object(O.jsx)("input",{placeholder:"image",onChange:function(t){n.setState({image:t.target.value})}})}),Object(O.jsx)("td",{children:Object(O.jsx)("button",{onClick:function(){n.addproduct()},children:"add"})})]})}),Object(O.jsx)("br",{})]})},n.state={add:!1,edit:!1,editId:"",_id:0,title:"",price:"",description:"",image:""},n}return Object(d.a)(c,[{key:"render",value:function(){var t=this;return Object(O.jsxs)("div",{children:[Object(O.jsx)("button",{className:"sistemButton card",onClick:function(){t.setState({add:!t.state.add})},children:"add product"}),Object(O.jsx)("br",{}),this.displayAddSection(),Object(O.jsxs)("table",{children:[Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:"title"}),Object(O.jsx)("td",{children:"price"}),Object(O.jsx)("td",{children:"description"}),Object(O.jsx)("td",{children:"image"}),Object(O.jsx)("td",{children:"edit/delete"})]}),this.props.productsList.map((function(e,c){return t.show(e,c)}))]})]})}}]),c}(n.Component),m=function(t){Object(u.a)(c,t);var e=Object(j.a)(c);function c(t){var n;return Object(o.a)(this,c),(n=e.call(this,t)).state={},n}return Object(d.a)(c,[{key:"render",value:function(){var t=this;return Object(O.jsxs)("div",{className:"AllItems",children:[Object(O.jsx)("img",{className:"imgSize",src:this.props.item.image}),Object(O.jsx)("h4",{children:this.props.item.title}),Object(O.jsx)("h6",{children:this.props.item.price}),Object(O.jsx)("button",{className:"productButton",onClick:function(){return t.props.addToCart(t.props.item)},children:"Add to cart"})]})}}]),c}(n.Component),v=function(t){Object(u.a)(c,t);var e=Object(j.a)(c);function c(t){var n;return Object(o.a)(this,c),(n=e.call(this,t)).displayCart=function(){if(n.state.cart)return n.state.cartList.length<=0?Object(O.jsx)("div",{children:"There is nothing in the cart"}):Object(O.jsxs)("div",{children:[Object(O.jsxs)("table",{children:[Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:"title"}),Object(O.jsx)("td",{children:"price"}),Object(O.jsx)("td",{children:"Image"}),Object(O.jsx)("td",{children:"delete"})]}),n.state.cartList.map((function(t,e){return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:t.title}),Object(O.jsx)("td",{children:t.price}),Object(O.jsx)("td",{children:Object(O.jsx)("img",{className:"imgSize2",src:t.image})}),Object(O.jsx)("td",{children:Object(O.jsx)("button",{onClick:function(){n.removeFromCart(t,e)},children:"\u274c"})})]})}))]}),Object(O.jsx)("br",{}),"total = ",n.state.total,Object(O.jsx)("br",{}),Object(O.jsx)("button",{onClick:n.finishTransaction,children:"buy"})]})},n.addToCart=function(t){n.setState({cartList:[].concat(Object(r.a)(n.state.cartList),[t])}),n.setState({total:n.state.total+parseInt(t.price)})},n.removeFromCart=function(t,e){n.setState({cartList:n.state.cartList.filter((function(t,c){return c!=e}))}),n.state.total>0&&n.setState({total:n.state.total-parseInt(t.price)})},n.finishTransaction=function(){var t={products:n.state.cartList,total:n.state.total};b.a.post("/api/addTransaction/",t),n.props.getDatafromDB(),n.setState({cartList:[],total:0}),alert("Transaction successfully received")},n.state={cart:!1,cartList:[],total:0},n}return Object(d.a)(c,[{key:"render",value:function(){var t=this;return Object(O.jsxs)("div",{children:[Object(O.jsx)("button",{className:"sistemButton card",onClick:function(){t.setState({cart:!t.state.cart})},children:"cart"}),Object(O.jsx)("br",{}),this.displayCart(),this.props.productsList.map((function(e){return Object(O.jsx)(m,{item:e,addToCart:t.addToCart})}))]})}}]),c}(n.Component),g=function(t){Object(u.a)(c,t);var e=Object(j.a)(c);function c(t){var n;return Object(o.a)(this,c),(n=e.call(this,t)).CalcProducts=function(){var t=n.props.transactionsList,e=[];t.forEach((function(t){t.products.forEach((function(c){if(0==e.length)e.push({product:c,transaction_id:t._id,productCounter:1,productUniqueCounter:1});else{var n=0;e.forEach((function(t){t.product._id==c._id&&n++})),0==n?e.push({product:c,transaction_id:t._id,productCounter:1,productUniqueCounter:1}):e.forEach((function(e){e.product._id==c._id&&(e.transaction_id==t._id?e.productCounter++:(e.transaction_id=t._id,e.productCounter++,e.productUniqueCounter++))}))}}))})),n.CalcTop5Sales(e),n.CalcTop5UniqueSales(e)},n.CalcTop5Sales=function(t){var e=t,c=[],i=5;e.length<5&&(i=e.length);for(var a=function(t){var n=[];e.forEach((function(t){(""==n||t.productCounter>n.productCounter)&&(n=t)})),c.push(n),e=e.filter((function(t){return t.product._id!=n.product._id}))},s=0;s<i;s++)a();n.setState({top5Sales:c})},n.CalcTop5UniqueSales=function(t){var e=t,c=[],i=5;e.length<5&&(i=e.length);for(var a=function(t){var n=[];e.forEach((function(t){(""==n||t.productUniqueCounter>n.productUniqueCounter)&&(n=t)})),c.push(n),e=e.filter((function(t){return t.product._id!=n.product._id}))},s=0;s<i;s++)a();n.setState({top5UniqueSales:c})},n.CalcDays=function(){for(var t=n.props.transactionsList,e=[],c=function(c){var n=new Date(Date.now()-24*c*60*60*1e3).toLocaleDateString("he-IL",{timeZone:"Asia/Jerusalem"}),i=0;t.forEach((function(t){t.date==n&&(i+=t.total)})),e.push({Day:n,total:i})},i=0;i<5;i++)c(i);n.setState({past5Days:e})},n.state={top5Sales:[],top5UniqueSales:[],past5Days:[]},n}return Object(d.a)(c,[{key:"componentDidMount",value:function(){this.CalcProducts(),this.CalcDays()}},{key:"render",value:function(){return Object(O.jsxs)("div",{className:"flex",children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("h3",{children:"top 5 sales"}),this.state.top5Sales.map((function(t){return Object(O.jsx)("h4",{children:t.product.title})}))]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("h3",{children:"top 5 unique sales"}),this.state.top5UniqueSales.map((function(t){return Object(O.jsx)("h4",{children:t.product.title})}))]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("h3",{children:"past 5 days"}),this.state.past5Days.map((function(t){return Object(O.jsxs)("h4",{children:[t.Day," ",t.total]})}))]})]})}}]),c}(n.Component),C=function(t){Object(u.a)(c,t);var e=Object(j.a)(c);function c(){var t;Object(o.a)(this,c);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).state={productsList:[],transactionsList:[]},t.getDatafromDB=function(){b.a.get("/api/getProducts").then((function(e){t.setState({productsList:e.data})})),b.a.get("/api/getTransactions").then((function(e){t.setState({transactionsList:e.data})}))},t.removeProduct=function(e,c){b.a.delete("/api/deleteProduct/".concat(e._id),e).then((function(t){console.log(t)})),t.setState({productsList:t.state.productsList.filter((function(t,e){return e!=c}))})},t.updateProducts=function(e,c){b.a.post("/api/updateProduct/".concat(e._id),e).then((function(t){console.log(t)}));var n=t.state.productsList;n[c]=e,t.setState({productsList:n})},t.addproduct=function(e){b.a.post("/api/addProduct/",e),t.setState({productsList:[].concat(Object(r.a)(t.state.productsList),[e])})},t}return Object(d.a)(c,[{key:"componentDidMount",value:function(){this.getDatafromDB()}},{key:"render",value:function(){var t=this;return Object(O.jsx)("div",{className:"App",children:Object(O.jsx)(l.a,{children:Object(O.jsxs)(p.c,{children:[Object(O.jsx)(p.a,{exact:!0,path:"/",component:function(){return Object(O.jsx)(f,{})}}),Object(O.jsx)(p.a,{exact:!0,path:"/admin",component:function(){return Object(O.jsx)(x,{productsList:t.state.productsList,updateProducts:t.updateProducts,addproduct:t.addproduct,removeProduct:t.removeProduct})}}),Object(O.jsx)(p.a,{exact:!0,path:"/home",component:function(){return Object(O.jsx)(v,{productsList:t.state.productsList,getDatafromDB:t.getDatafromDB})}}),Object(O.jsx)(p.a,{exact:!0,path:"/stats",component:function(){return Object(O.jsx)(g,{transactionsList:t.state.transactionsList})}})]})})})}}]),c}(n.Component);s.a.render(Object(O.jsx)(i.a.StrictMode,{children:Object(O.jsx)(C,{})}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.a68e0898.chunk.js.map